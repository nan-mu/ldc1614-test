services:
  # Update this to the name of the service you want to work with in your docker-compose.yml file
  dev-container:
    # 如果你想覆盖服务的 Dockerfile 到 .devcontainer 文件夹中的一个，请取消注释。
    # 请注意，Dockerfile 和上下文的路径是相对于*主* docker-compose.yml 文件的（即 devcontainer.json
    # "dockerComposeFile" 数组中的第一个）。下面的示例假设你的主文件在项目的根目录中。

    # 使用dockerhub的镜像而非本地构建
    # TODO: 等服务器到货后搭建一个校园网内的docker镜像源不使用dockerhub
    image: nanmu111/ldc1614-test-dev-container:latest
    # build:
    #   context: .
    #   dockerfile: .devcontainer/Dockerfile
    #   args:
    #     # 注意替换为自己的代理地址，使用http/https代理
    #     proxy: "http://127.0.0.1:7890" 

    volumes:
      # Update this to wherever you want VS Code to mount the folder of your project
      - .:/workspaces:cached
      - ~/.gitconfig:/home/vscode/.gitconfig # 挂载本地 git 配置
      - ~/.ssh:/home/vscode/.ssh # 挂载本地 SSH 密钥

    # Uncomment the next four lines if you will use a ptrace-based debugger like C++, Go, and Rust.
    # cap_add:
    #   - SYS_PTRACE
    # security_opt:
    #   - seccomp:unconfined

    command: sleep infinity
